{"ast":null,"code":"var _jsxFileName = \"/Users/karahowes/Desktop/project-final-kh/frontend/src/components/Main.js\";\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { API_URL } from '../utils/urls';\nimport thoughts from '../reducers/thoughts';\n\nconst Main = () => {\n  const thoughtsItems = useSelector(store => store.thoughts.items);\n  const accessToken = useSelector(store => store.member.accessToken);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!accessToken) {\n      navigate('/signin');\n    }\n  }, [accessToken, navigate]);\n  useEffect(() => {\n    const options = {\n      method: 'GET',\n      headers: {\n        Authorization: accessToken\n      }\n    };\n    fetch(API_URL('thoughts'), options).then(res => res.json()).then(data => {\n      if (data.success) {\n        dispatch(thoughts.actions.setItems(data.response));\n        dispatch(thoughts.actions.setError(null));\n      } else {\n        dispatch(thoughts.actions.setItems([]));\n        dispatch(thoughts.actions.setError(data.response));\n      }\n    });\n  }, [accessToken, dispatch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, \"To '/login' !\")), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 4\n    }\n  }, \"Protected happy thoughts:\"), thoughtsItems.map(item => /*#__PURE__*/React.createElement(\"div\", {\n    key: item._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, item.message)));\n};\n\nexport default Main;","map":{"version":3,"sources":["/Users/karahowes/Desktop/project-final-kh/frontend/src/components/Main.js"],"names":["React","useEffect","useSelector","useDispatch","useNavigate","Link","API_URL","thoughts","Main","thoughtsItems","store","items","accessToken","member","dispatch","navigate","options","method","headers","Authorization","fetch","then","res","json","data","success","actions","setItems","response","setError","map","item","_id","message"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,WAAT,EAAsBC,IAAtB,QAAkC,kBAAlC;AAEA,SAASC,OAAT,QAAwB,eAAxB;AACA,OAAOC,QAAP,MAAqB,sBAArB;;AAEA,MAAMC,IAAI,GAAG,MAAM;AAClB,QAAMC,aAAa,GAAGP,WAAW,CAAEQ,KAAD,IAAWA,KAAK,CAACH,QAAN,CAAeI,KAA3B,CAAjC;AACA,QAAMC,WAAW,GAAGV,WAAW,CAAEQ,KAAD,IAAWA,KAAK,CAACG,MAAN,CAAaD,WAAzB,CAA/B;AAEA,QAAME,QAAQ,GAAGX,WAAW,EAA5B;AACA,QAAMY,QAAQ,GAAGX,WAAW,EAA5B;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACf,QAAI,CAACW,WAAL,EAAkB;AACjBG,MAAAA,QAAQ,CAAC,SAAD,CAAR;AACA;AACD,GAJQ,EAIN,CAACH,WAAD,EAAcG,QAAd,CAJM,CAAT;AAMAd,EAAAA,SAAS,CAAC,MAAM;AACf,UAAMe,OAAO,GAAG;AACfC,MAAAA,MAAM,EAAE,KADO;AAEfC,MAAAA,OAAO,EAAE;AACRC,QAAAA,aAAa,EAAEP;AADP;AAFM,KAAhB;AAOAQ,IAAAA,KAAK,CAACd,OAAO,CAAC,UAAD,CAAR,EAAsBU,OAAtB,CAAL,CACEK,IADF,CACQC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADhB,EAEEF,IAFF,CAEQG,IAAD,IAAU;AACf,UAAIA,IAAI,CAACC,OAAT,EAAkB;AACjBX,QAAAA,QAAQ,CAACP,QAAQ,CAACmB,OAAT,CAAiBC,QAAjB,CAA0BH,IAAI,CAACI,QAA/B,CAAD,CAAR;AACAd,QAAAA,QAAQ,CAACP,QAAQ,CAACmB,OAAT,CAAiBG,QAAjB,CAA0B,IAA1B,CAAD,CAAR;AACA,OAHD,MAGO;AACNf,QAAAA,QAAQ,CAACP,QAAQ,CAACmB,OAAT,CAAiBC,QAAjB,CAA0B,EAA1B,CAAD,CAAR;AACAb,QAAAA,QAAQ,CAACP,QAAQ,CAACmB,OAAT,CAAiBG,QAAjB,CAA0BL,IAAI,CAACI,QAA/B,CAAD,CAAR;AACA;AACD,KAVF;AAWA,GAnBQ,EAmBN,CAAChB,WAAD,EAAcE,QAAd,CAnBM,CAAT;AAqBA,sBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,SAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADD,CADD,eAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAJD,EAKEL,aAAa,CAACqB,GAAd,CAAmBC,IAAD,iBAClB;AAAK,IAAA,GAAG,EAAEA,IAAI,CAACC,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqBD,IAAI,CAACE,OAA1B,CADA,CALF,CADD;AAWA,CA7CD;;AA+CA,eAAezB,IAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useNavigate, Link } from 'react-router-dom';\n\nimport { API_URL } from '../utils/urls';\nimport thoughts from '../reducers/thoughts';\n\nconst Main = () => {\n\tconst thoughtsItems = useSelector((store) => store.thoughts.items);\n\tconst accessToken = useSelector((store) => store.member.accessToken);\n\n\tconst dispatch = useDispatch();\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tif (!accessToken) {\n\t\t\tnavigate('/signin');\n\t\t}\n\t}, [accessToken, navigate]);\n\n\tuseEffect(() => {\n\t\tconst options = {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\tAuthorization: accessToken,\n\t\t\t},\n\t\t};\n\n\t\tfetch(API_URL('thoughts'), options)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data) => {\n\t\t\t\tif (data.success) {\n\t\t\t\t\tdispatch(thoughts.actions.setItems(data.response));\n\t\t\t\t\tdispatch(thoughts.actions.setError(null));\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(thoughts.actions.setItems([]));\n\t\t\t\t\tdispatch(thoughts.actions.setError(data.response));\n\t\t\t\t}\n\t\t\t});\n\t}, [accessToken, dispatch]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div>\n\t\t\t\t<Link to=\"/signin\">To '/login' !</Link>\n\t\t\t</div>\n\t\t\t<h1>Protected happy thoughts:</h1>\n\t\t\t{thoughtsItems.map((item) => (\n\t\t\t\t<div key={item._id}>{item.message}</div>\n\t\t\t))}\n\t\t</div>\n\t);\n};\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}