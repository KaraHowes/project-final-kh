{"ast":null,"code":"import _slicedToArray from \"/Users/karahowes/Desktop/kh-final/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/karahowes/Desktop/kh-final/frontend/src/components/Login.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch, batch } from 'react-redux';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { API_URL } from '../utils/urls';\nimport member from '../reducers/member';\n\nconst Login = () => {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        membername = _useState2[0],\n        setMembername = _useState2[1];\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        password = _useState4[0],\n        setPassword = _useState4[1];\n\n  const _useState5 = useState('signup'),\n        _useState6 = _slicedToArray(_useState5, 2),\n        mode = _useState6[0],\n        setMode = _useState6[1];\n\n  const accessToken = useSelector(store => store.user.accessToken);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (accessToken) {\n      navigate('/');\n    }\n  }, [accessToken, navigate]);\n\n  const onFormSubmit = event => {\n    event.preventDefault();\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    };\n    fetch(API_URL(mode), options).then(res => res.json()).then(data => {\n      console.log(data);\n\n      if (data.success) {\n        batch(() => {\n          dispatch(member.actions.setMemberId(data.response.memberId));\n          dispatch(member.actions.setMembername(data.response.membername));\n          dispatch(member.actions.setAccessToken(data.response.accessToken));\n          dispatch(member.actions.setError(null));\n        });\n      } else {\n        batch(() => {\n          dispatch(member.actions.setMemberId(null));\n          dispatch(member.actions.setMembername(null));\n          dispatch(member.actions.setAccessToken(null));\n          dispatch(member.actions.setError(data.response));\n        });\n      }\n    });\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"To '/' !\")), React.createElement(\"label\", {\n    htmlFor: \"signup\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Signup\"), React.createElement(\"input\", {\n    id: \"signup\",\n    type: \"radio\",\n    checked: mode === 'signup',\n    onChange: () => setMode('signup'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"signin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Signin\"), React.createElement(\"input\", {\n    id: \"signin\",\n    type: \"radio\",\n    checked: mode === 'signin',\n    onChange: () => setMode('signin'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(\"form\", {\n    onSubmit: onFormSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"Username\"), React.createElement(\"input\", {\n    id: \"username\",\n    type: \"text\",\n    value: username,\n    onChange: e => setMembername(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"input\", {\n    id: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Submit\")));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/karahowes/Desktop/kh-final/frontend/src/components/Login.js"],"names":["React","useState","useEffect","useSelector","useDispatch","batch","useNavigate","Link","API_URL","member","Login","membername","setMembername","password","setPassword","mode","setMode","accessToken","store","user","dispatch","navigate","onFormSubmit","event","preventDefault","options","method","headers","body","JSON","stringify","username","fetch","then","res","json","data","console","log","success","actions","setMemberId","response","memberId","setAccessToken","setError","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch, batch } from 'react-redux';\nimport { useNavigate, Link } from 'react-router-dom';\n\nimport { API_URL } from '../utils/urls';\nimport member from '../reducers/member';\n\nconst Login = () => {\n\tconst [membername, setMembername] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [mode, setMode] = useState('signup');\n\n\tconst accessToken = useSelector((store) => store.user.accessToken);\n\n\tconst dispatch = useDispatch();\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tif (accessToken) {\n\t\t\tnavigate('/');\n\t\t}\n\t}, [accessToken, navigate]);\n\n\tconst onFormSubmit = (event) => {\n\t\tevent.preventDefault();\n\n\t\tconst options = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ username, password }),\n\t\t};\n\n\t\tfetch(API_URL(mode), options)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data) => {\n\t\t\t\tconsole.log(data);\n\t\t\t\tif (data.success) {\n\t\t\t\t\tbatch(() => {\n\t\t\t\t\t\tdispatch(member.actions.setMemberId(data.response.memberId));\n\t\t\t\t\t\tdispatch(member.actions.setMembername(data.response.membername));\n\t\t\t\t\t\tdispatch(member.actions.setAccessToken(data.response.accessToken));\n\t\t\t\t\t\tdispatch(member.actions.setError(null));\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tbatch(() => {\n\t\t\t\t\t\tdispatch(member.actions.setMemberId(null));\n\t\t\t\t\t\tdispatch(member.actions.setMembername(null));\n\t\t\t\t\t\tdispatch(member.actions.setAccessToken(null));\n\t\t\t\t\t\tdispatch(member.actions.setError(data.response));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div>\n\t\t\t\t<Link to=\"/\">To '/' !</Link>\n\t\t\t</div>\n\t\t\t<label htmlFor=\"signup\">Signup</label>\n\t\t\t<input\n\t\t\t\tid=\"signup\"\n\t\t\t\ttype=\"radio\"\n\t\t\t\tchecked={mode === 'signup'}\n\t\t\t\tonChange={() => setMode('signup')}\n\t\t\t/>\n\t\t\t<label htmlFor=\"signin\">Signin</label>\n\t\t\t<input\n\t\t\t\tid=\"signin\"\n\t\t\t\ttype=\"radio\"\n\t\t\t\tchecked={mode === 'signin'}\n\t\t\t\tonChange={() => setMode('signin')}\n\t\t\t/>\n\t\t\t<form onSubmit={onFormSubmit}>\n\t\t\t\t<label htmlFor=\"username\">Username</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"username\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={username}\n\t\t\t\t\tonChange={(e) => setMembername(e.target.value)}\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"password\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t/>\n\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t</form>\n\t\t</>\n\t);\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}